<html>
    <head>
        <script src="https://meet.jit.si/external_api.js"></script>
        <style>
            
            html, body {
                margin: 0;
                padding: 0;
                width: 100%;
                height: 100%;
                overflow: hidden;
            }

           
            #jitsi-container {
                width: 100vw;
                height: 100vh;
                position: fixed;
                top: 0;
                left: 0;
            }
        </style>
    </head>
    <body>
        <div id="jitsi-container"></div>
        <script>
            var api = null;

            const urlParams = new URLSearchParams(window.location.search);
            const roomName = urlParams.get('room_name') || "defaultRoom";

                if (typeof JitsiMeetExternalAPI !== 'undefined') { // Ensure the API is loaded
                    var domain = "meet.jit.si";
                    var options = {
                        roomName: roomName,
                        width: "100%",
                        height: "100%",
                        parentNode: document.querySelector("#jitsi-container"),
                        configOverwrite: {
                        toolbarButtons: [
                            "microphone", "camera", "desktop", "chat", "settings", 
                            "raisehand", "tileview", "fullscreen"
                        ] // "hangup" button removed
                    },
                        interfaceConfigOverwrite: {
                            SHOW_JITSI_WATERMARK: false
                        }
                    };
                    api = new JitsiMeetExternalAPI(domain, options);
                } else {
                    console.error("JitsiMeetExternalAPI is not defined.");
                }


            function endMeeting() {
                if (api) {
                    api.executeCommand('hangup'); // âœ… Ends the meeting
                } else {
                    console.error("Jitsi API is not initialized.");
                }
            }

            // Expose the start and end functions to PyQt6 or the global window object
            window.endMeeting = endMeeting;
        </script>
    </body>
</html>